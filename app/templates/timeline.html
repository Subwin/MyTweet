<!DOCTYPE html>
{% extends "base.html" %}
<html lang="en">
{% block head %}
    {{ super() }}
    <script src="/static/js/jquery.tmpl.min.js"></script>
    <script src="/static/js/weibo.js"></script>
    <script src="/static/js/action.js"></script>
    <script id="id-template-tweet" type="text/x-jquery-tmpl">
         <p>
              ${ content }
              ${ created_time }
         </p>
    </script>
    <script>

        $(document).ready(function(){
            bindAddTweetAction('#id-tweet-title');
        });
    </script>
    {% block title %}
        <title>timeline</title>
    {% endblock %}
{% endblock %}
<body>
    {% block content %}
        <!-- Blog Entries Column -->
    <h1 class="page-header">
        首页
        <small>所有人的微博</small>
    </h1>
    {% for t in all_tweets %}
    <!-- First Blog Post -->
    <br>
    <p class="lead">
        <a href="{{ url_for('controllers.other_tweet_view', username=t.user.username) }}">{{ t.user.username }}</a>
    </p>
    <p><span class="glyphicon glyphicon-time"></span> {{ t.created_time }}</p>
    <hr>
    <div>
        <h3>{{ t.content }}</h3>
        <a href="/tweet/comments/{{ t.id }}"><h4>评论({{ t.comments|length }})</h4></a>
    </div>
{#    <a class="btn btn-primary" href="{{ url_for('controllers.other_tweet_view', username=all_tweets[0].user.username) }}">看看他的微博 <span class="glyphicon glyphicon-chevron-right"></span></a>#}
    <hr>
    {% endfor %}
    <!-- Second Blog Post -->


{#    todo:增加翻页功能#}
    <!-- Pager -->
{#    <ul class="pager">#}
{#        <li class="previous">#}
{#            <a href="#">&larr; Newer</a>#}
{#        </li>#}
{#        <li class="next">#}
{#            <a href="#">Older &rarr;</a>#}
{#        </li>#}
{#    </ul>#}
    {% endblock %}

    {% block sidebar %}
        {{ super() }}
        <!-- Blog Input Well -->
        <div class="well">
            <h4>说点新鲜事？</h4>
            <div>
                <textarea class="form-control" id="id-input-content" name="content" placeholder="写点东西" rows="6"></textarea>
            </div>
            <br>
            <div align="right">
                <button type="button" class="btn btn-primary btn-lg" id="id-button-add">
                    发！
                </button>
            </div>
        </div>
    {% endblock %}
</body>
</html>