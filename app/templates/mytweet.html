<!DOCTYPE html>
{% extends "base.html" %}
<html lang="en">
<head>
    <meta charset="UTF-8">
{% block head %}
    {{ super() }}
    <script src="/static/js/jquery.tmpl.min.js"></script>
    <script src="/static/js/weibo.js"></script>
    <script src="/static/js/action.js"></script>
    <script id="id-template-tweet" type="text/x-jquery-tmpl">
         <p>
            ${ content } : ${ created_time }
            <a href="tweet/update/${ id }">编辑</a>
            <button class="button-delete" data-id="${ id }" >删除</button>
         </p>
    </script>
    {#    <script>#}
{#    var mytweet_t=(`#}
{#          <br>#}
{#            <div>#}
{#                <p class="lead">#}
{#                    <a href="#${ url_for('controllers.other_tweet_view', username=t.user.username) }">${ t.user.username }</a>#}
{#                </p>#}
{#                <p><span class="glyphicon glyphicon-time"></span> ${ t.created_time }</p>#}
{#                <hr>#}
{#                <div>#}
{#                    ${ t.content }#}
{#                    <a href="/tweet/update/${t.id}">编辑</a>#}
{#                    <button class="button-delete" data-id="${ t.id }">删除</button>#}
{#                    <a href="/tweet/comments/${ t.id }"><h4>评论(${ t.comments|length })</h4></a>#}
{#                </div>#}
{#                <hr>#}
{#            </div>`)#}
{#    </script>#}
    <script>
        $(document).ready(function(){
            bindDeleteAction();
            bindAddTweetAction('#id-button-add');
        });
    </script>
    {% block title %}
        <title>mytweet</title>
    {% endblock %}
{% endblock %}
</head>
<body>
{% block content %}
        <!-- Blog Entries Column -->
    <h1 class="page-header">
        我的主页
        <small>我的微博</small>
    </h1>
    {% for t in all_tweets %}
    <!-- First Blog Post -->
    <div class="content">
    <br>
        <p class="lead">
            <a href="{{ url_for('controllers.other_tweet_view', username=t.user.username) }}">{{ t.user.username }}</a>
        </p>
        <p><span class="glyphicon glyphicon-time"></span> {{ t.created_time }}</p>
        <hr>
        <div>
            {{ t.content }}
            <a href="/tweet/update/{{t.id}}">编辑</a>
            <button class="button-delete" data-id="{{ t.id }}">删除</button>
            <a href="/tweet/comments/{{ t.id }}"><h4>评论({{ t.comments|length }})</h4></a>
        </div>
        <hr>
    </div>
    {% endfor %}
    <!-- Second Blog Post -->



    <!-- Pager -->
{#    <ul class="pager">#}
{#        <li class="previous">#}
{#            <a href="#">&larr; Newer</a>#}
{#        </li>#}
{#        <li class="next">#}
{#            <a href="#">Older &rarr;</a>#}
{#        </li>#}
{#    </ul>#}
{% endblock %}

    {% block sidebar %}
        {{ super() }}
        <!-- Blog Input Well -->
        <div class="well">
            <h4>说点新鲜事？</h4>
            <div>
                <textarea class="form-control" id="id-input-content" name="content" placeholder="写点东西" rows="6"></textarea>
            </div>
            <br>
            <div align="right">
                <button type="button" class="btn btn-primary btn-lg" id="id-button-add">
                    发！
                </button>
            </div>
        </div>
    {% endblock %}
</body>
</html>